<html>
<head>
<title>Road2Science game</title>
  <meta charset="utf-8">

<style>

#tweets {
border-collapse: collapse;
width:100%;
padding: 9px 12px;
font-family: "Segoe UI",Arial,sans-serif;
border: 0px;
}

#tweets	td {vertical-align: top;}

#tweets	th, td { border-bottom: 1px solid #e6ecf0;}

.avatar {
	width: 50px;
    height: 50px;
    border-radius: 50%;	
	margin-right:5px;
}

.heshtag {
color: #1DA1F2;
}

.cell {
	position: relative;
	border:1px solid #097520;
	cursor: pointer;
	float: left;
	display:inline-block;
}

	

.main_img {
	position: absolute;
	z-index: 1;
}

.feedback_img {
	position: absolute;
	z-index: 3;
}
.build_choice {
	position:relative;
	float:left;
	display:inline-block;
	margin:10px;
	padding:10px;
	background-color:#fcfcc1;
	border-radius: 10px;
	border: 2px solid #9f900b;
	min-width:10vw;
	cursor: pointer;}

.build_choice img {
	float: left;
	margin-right:3px;}
	
.sizeS {height:11vw;
	width:11vw;}
	
.sizeM {height:5vw;
	width:5vw;}
	
.amount {
	position:relative;
	left:-1vw;
	top:-4vw;
	padding:5px;
	background-color:#880015;
	display:inline-block;
	border-radius: 50%;
    font-weight: bold;
    color: white;
	width:18px;
	height:18px;
	text-align: center;
	display:none;}

.border {
	border:2px solid red;}

#build {
	position:absolute;
	top:10vh;
	left:10vw;
	width:80vw;
	background-color: white;
	padding: 10px;
	border: 2px solid black;
	z-index: 90;}

#TweetsDIV {
	border:5px solid #48AAE6;
	overflow-y: scroll;
	height:400px;
	padding:10px;}
	
#TweetsDIV h2 {
	font-family: "Segoe UI",Arial,sans-serif;
	color:white;
	background-color:#48AAE6;
	margin: -10px;
    margin-bottom: 20px;
	padding:10px;	}
		
/* Landscape */
@media screen and (orientation:landscape) {
   .size {
		height:7.4vh;
		width:7.4vh;}
	#playfield {
		height:80vh;
		width:80vh;
		margin-left: calc(40vw - 40vh);}
		
	#finish_button {
		position: absolute;
		right: 2vh;
		bottom: 2vh;
		cursor: pointer;}
	
	#help_button {
		position: absolute;
		right: 2vh;
		bottom: 15vh;
		cursor: pointer;}
		
	#build_button {
		position: absolute;
		right: 2vh;
		bottom: 28vh;
		cursor: pointer;}
		
	#cell_discription {
		position: absolute;
		right: 2vh;
		top: 2vh;
		height: 55vh;
		width: 20vh;}
		
	#help_button img, #build_button img, #finish_button img{
		height:10vh;
		width:10vh;}
		
	#help {
		position:absolute;
		top:10vh;
		left:15vw;
		width:70vw;		
		background-color: white;
		padding: 10px;
		border: 2px solid black;
		z-index: 99;}

		#CommentsDIV,#TweetsDIV {
    border: 1px solid white;
    float: left;
	width: 48vw;
}
		
}

/* Portrait */
@media screen and (orientation:portrait) {
   .size {
		height:7.4vw;
		width:7.4vw;}
		
	#playfield {
		height:80vw;
		width:80vw;
		margin: 0 auto;
		}
		
	#finish_button {
		position: absolute;
		right: 2vw;
		bottom: 2vw;
		cursor: pointer;}
		
	#help_button {
		position: absolute;
		right: 15vw;
		bottom: 2vw;
		cursor: pointer;}
		
	#build_button {
		position: absolute;
		right: 28vw;
		bottom: 2vw;
		cursor: pointer;}
	
	#cell_discription {
		position: absolute;
		left: 2vw;
		bottom: 2vw;
		height: 20vw;
		width: 55vw;}
		
	#help_button img, #build_button img, #finish_button img{
		height:10vw;
		width:10vw;}
		
	#help {
	position:absolute;
	top:10vh;
	left:10vw;
	width:80vw;
	background-color: white;
	padding: 10px;
	border: 2px solid black;
	z-index: 99;}
	
	
		
}


</style>
<script src="feedback.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

</head>

<body>
<div id="playfield">
	<div style="clear:both"></div>
		<div class="cell size"><img id="field00" src="img/empty.png" class="size main_img" onclick="choose_field('field00')"><span id="feedback00"></span></div>
		<div class="cell size"><img id="field01" src="img/empty.png" class="size main_img" onclick="choose_field('field01')"><span id="feedback01"></span></div>
		<div class="cell size"><img id="field02" src="img/empty.png" class="size main_img" onclick="choose_field('field02')"><span id="feedback02"></span></div>
		<div class="cell size"><img id="field03" src="img/empty.png" class="size main_img" onclick="choose_field('field03')"><span id="feedback03"></span></div>
		<div class="cell size"><img id="field04" src="img/empty.png" class="size main_img" onclick="choose_field('field04')"><span id="feedback04"></span></div>
		<div class="cell size"><img id="field05" src="img/empty.png" class="size main_img" onclick="choose_field('field05')"><span id="feedback05"></span></div>
		<div class="cell size"><img id="field06" src="img/empty.png" class="size main_img" onclick="choose_field('field06')"><span id="feedback06"></span></div>
		<div class="cell size"><img id="field07" src="img/empty.png" class="size main_img" onclick="choose_field('field07')"><span id="feedback07"></span></div>
		<div class="cell size"><img id="field08" src="img/empty.png" class="size main_img" onclick="choose_field('field08')"><span id="feedback08"></span></div>
		<div class="cell size"><img id="field09" src="img/empty.png" class="size main_img" onclick="choose_field('field09')"><span id="feedback09"></span></div>
	<div style="clear:both"></div>
		<div class="cell size"><img id="field10" src="img/empty.png" class="size main_img" onclick="choose_field('field10')"><span id="feedback10"></span></div>
		<div class="cell size"><img id="field11" src="img/empty.png" class="size main_img" onclick="choose_field('field11')"><span id="feedback11"></span></div>
		<div class="cell size"><img id="field12" src="img/empty.png" class="size main_img" onclick="choose_field('field12')"><span id="feedback12"></span></div>
		<div class="cell size"><img id="field13" src="img/empty.png" class="size main_img" onclick="choose_field('field13')"><span id="feedback13"></span></div>
		<div class="cell size"><img id="field14" src="img/empty.png" class="size main_img" onclick="choose_field('field14')"><span id="feedback14"></span></div>
		<div class="cell size"><img id="field15" src="img/empty.png" class="size main_img" onclick="choose_field('field15')"><span id="feedback15"></span></div>
		<div class="cell size"><img id="field16" src="img/empty.png" class="size main_img" onclick="choose_field('field16')"><span id="feedback16"></span></div>
		<div class="cell size"><img id="field17" src="img/empty.png" class="size main_img" onclick="choose_field('field17')"><span id="feedback17"></span></div>
		<div class="cell size"><img id="field18" src="img/empty.png" class="size main_img" onclick="choose_field('field18')"><span id="feedback18"></span></div>
		<div class="cell size"><img id="field19" src="img/empty.png" class="size main_img" onclick="choose_field('field19')"><span id="feedback19"></span></div>
	<div style="clear:both"></div>
		<div class="cell size"><img id="field20" src="img/empty.png" class="size main_img" onclick="choose_field('field20')"><span id="feedback20"></span></div>
		<div class="cell size"><img id="field21" src="img/empty.png" class="size main_img" onclick="choose_field('field21')"><span id="feedback21"></span></div>
		<div class="cell size"><img id="field22" src="img/empty.png" class="size main_img" onclick="choose_field('field22')"><span id="feedback22"></span></div>
		<div class="cell size"><img id="field23" src="img/empty.png" class="size main_img" onclick="choose_field('field23')"><span id="feedback23"></span></div>
		<div class="cell size"><img id="field24" src="img/empty.png" class="size main_img" onclick="choose_field('field24')"><span id="feedback24"></span></div>
		<div class="cell size"><img id="field25" src="img/empty.png" class="size main_img" onclick="choose_field('field25')"><span id="feedback25"></span></div>
		<div class="cell size"><img id="field26" src="img/empty.png" class="size main_img" onclick="choose_field('field26')"><span id="feedback26"></span></div>
		<div class="cell size"><img id="field27" src="img/empty.png" class="size main_img" onclick="choose_field('field27')"><span id="feedback27"></span></div>
		<div class="cell size"><img id="field28" src="img/empty.png" class="size main_img" onclick="choose_field('field28')"><span id="feedback28"></span></div>
		<div class="cell size"><img id="field29" src="img/empty.png" class="size main_img" onclick="choose_field('field29')"><span id="feedback29"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field30" src="img/empty.png" class="size main_img" onclick="choose_field('field30')"><span id="feedback30"></span></div>
		<div class="cell size"><img id="field31" src="img/empty.png" class="size main_img" onclick="choose_field('field31')"><span id="feedback31"></span></div>
		<div class="cell size"><img id="field32" src="img/empty.png" class="size main_img" onclick="choose_field('field32')"><span id="feedback32"></span></div>
		<div class="cell size"><img id="field33" src="img/empty.png" class="size main_img" onclick="choose_field('field33')"><span id="feedback33"></span></div>
		<div class="cell size"><img id="field34" src="img/empty.png" class="size main_img" onclick="choose_field('field34')"><span id="feedback34"></span></div>
		<div class="cell size"><img id="field35" src="img/empty.png" class="size main_img" onclick="choose_field('field35')"><span id="feedback35"></span></div>
		<div class="cell size"><img id="field36" src="img/empty.png" class="size main_img" onclick="choose_field('field36')"><span id="feedback36"></span></div>
		<div class="cell size"><img id="field37" src="img/empty.png" class="size main_img" onclick="choose_field('field37')"><span id="feedback37"></span></div>
		<div class="cell size"><img id="field38" src="img/empty.png" class="size main_img" onclick="choose_field('field38')"><span id="feedback38"></span></div>
		<div class="cell size"><img id="field39" src="img/empty.png" class="size main_img" onclick="choose_field('field39')"><span id="feedback39"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field40" src="img/empty.png" class="size main_img" onclick="choose_field('field40')"><span id="feedback40"></span></div>
		<div class="cell size"><img id="field41" src="img/empty.png" class="size main_img" onclick="choose_field('field41')"><span id="feedback41"></span></div>
		<div class="cell size"><img id="field42" src="img/empty.png" class="size main_img" onclick="choose_field('field42')"><span id="feedback42"></span></div>
		<div class="cell size"><img id="field43" src="img/empty.png" class="size main_img" onclick="choose_field('field43')"><span id="feedback43"></span></div>
		<div class="cell size"><img id="field44" src="img/empty.png" class="size main_img" onclick="choose_field('field44')"><span id="feedback44"></span></div>
		<div class="cell size"><img id="field45" src="img/empty.png" class="size main_img" onclick="choose_field('field45')"><span id="feedback45"></span></div>
		<div class="cell size"><img id="field46" src="img/empty.png" class="size main_img" onclick="choose_field('field46')"><span id="feedback46"></span></div>
		<div class="cell size"><img id="field47" src="img/empty.png" class="size main_img" onclick="choose_field('field47')"><span id="feedback47"></span></div>
		<div class="cell size"><img id="field48" src="img/empty.png" class="size main_img" onclick="choose_field('field48')"><span id="feedback48"></span></div>
		<div class="cell size"><img id="field49" src="img/empty.png" class="size main_img" onclick="choose_field('field49')"><span id="feedback49"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field50" src="img/empty.png" class="size main_img" onclick="choose_field('field50')"><span id="feedback50"></span></div>
		<div class="cell size"><img id="field51" src="img/empty.png" class="size main_img" onclick="choose_field('field51')"><span id="feedback51"></span></div>
		<div class="cell size"><img id="field52" src="img/empty.png" class="size main_img" onclick="choose_field('field52')"><span id="feedback52"></span></div>
		<div class="cell size"><img id="field53" src="img/empty.png" class="size main_img" onclick="choose_field('field53')"><span id="feedback53"></span></div>
		<div class="cell size"><img id="field54" src="img/empty.png" class="size main_img" onclick="choose_field('field54')"><span id="feedback54"></span></div>
		<div class="cell size"><img id="field55" src="img/empty.png" class="size main_img" onclick="choose_field('field55')"><span id="feedback55"></span></div>
		<div class="cell size"><img id="field56" src="img/empty.png" class="size main_img" onclick="choose_field('field56')"><span id="feedback56"></span></div>
		<div class="cell size"><img id="field57" src="img/empty.png" class="size main_img" onclick="choose_field('field57')"><span id="feedback57"></span></div>
		<div class="cell size"><img id="field58" src="img/empty.png" class="size main_img" onclick="choose_field('field58')"><span id="feedback58"></span></div>
		<div class="cell size"><img id="field59" src="img/empty.png" class="size main_img" onclick="choose_field('field59')"><span id="feedback59"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field60" src="img/empty.png" class="size main_img" onclick="choose_field('field60')"><span id="feedback60"></span></div>
		<div class="cell size"><img id="field61" src="img/empty.png" class="size main_img" onclick="choose_field('field61')"><span id="feedback61"></span></div>
		<div class="cell size"><img id="field62" src="img/empty.png" class="size main_img" onclick="choose_field('field62')"><span id="feedback62"></span></div>
		<div class="cell size"><img id="field63" src="img/empty.png" class="size main_img" onclick="choose_field('field63')"><span id="feedback63"></span></div>
		<div class="cell size"><img id="field64" src="img/empty.png" class="size main_img" onclick="choose_field('field64')"><span id="feedback64"></span></div>
		<div class="cell size"><img id="field65" src="img/empty.png" class="size main_img" onclick="choose_field('field65')"><span id="feedback65"></span></div>
		<div class="cell size"><img id="field66" src="img/empty.png" class="size main_img" onclick="choose_field('field66')"><span id="feedback66"></span></div>
		<div class="cell size"><img id="field67" src="img/empty.png" class="size main_img" onclick="choose_field('field67')"><span id="feedback67"></span></div>
		<div class="cell size"><img id="field68" src="img/empty.png" class="size main_img" onclick="choose_field('field68')"><span id="feedback68"></span></div>
		<div class="cell size"><img id="field69" src="img/empty.png" class="size main_img" onclick="choose_field('field69')"><span id="feedback69"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field70" src="img/empty.png" class="size main_img" onclick="choose_field('field70')"><span id="feedback70"></span></div>
		<div class="cell size"><img id="field71" src="img/empty.png" class="size main_img" onclick="choose_field('field71')"><span id="feedback71"></span></div>
		<div class="cell size"><img id="field72" src="img/empty.png" class="size main_img" onclick="choose_field('field72')"><span id="feedback72"></span></div>
		<div class="cell size"><img id="field73" src="img/empty.png" class="size main_img" onclick="choose_field('field73')"><span id="feedback73"></span></div>
		<div class="cell size"><img id="field74" src="img/empty.png" class="size main_img" onclick="choose_field('field74')"><span id="feedback74"></span></div>
		<div class="cell size"><img id="field75" src="img/empty.png" class="size main_img" onclick="choose_field('field75')"><span id="feedback75"></span></div>
		<div class="cell size"><img id="field76" src="img/empty.png" class="size main_img" onclick="choose_field('field76')"><span id="feedback76"></span></div>
		<div class="cell size"><img id="field77" src="img/empty.png" class="size main_img" onclick="choose_field('field77')"><span id="feedback77"></span></div>
		<div class="cell size"><img id="field78" src="img/empty.png" class="size main_img" onclick="choose_field('field78')"><span id="feedback78"></span></div>
		<div class="cell size"><img id="field79" src="img/empty.png" class="size main_img" onclick="choose_field('field79')"><span id="feedback79"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field80" src="img/empty.png" class="size main_img" onclick="choose_field('field80')"><span id="feedback80"></span></div>
		<div class="cell size"><img id="field81" src="img/empty.png" class="size main_img" onclick="choose_field('field81')"><span id="feedback81"></span></div>
		<div class="cell size"><img id="field82" src="img/empty.png" class="size main_img" onclick="choose_field('field82')"><span id="feedback82"></span></div>
		<div class="cell size"><img id="field83" src="img/empty.png" class="size main_img" onclick="choose_field('field83')"><span id="feedback83"></span></div>
		<div class="cell size"><img id="field84" src="img/empty.png" class="size main_img" onclick="choose_field('field84')"><span id="feedback84"></span></div>
		<div class="cell size"><img id="field85" src="img/empty.png" class="size main_img" onclick="choose_field('field85')"><span id="feedback85"></span></div>
		<div class="cell size"><img id="field86" src="img/empty.png" class="size main_img" onclick="choose_field('field86')"><span id="feedback86"></span></div>
		<div class="cell size"><img id="field87" src="img/empty.png" class="size main_img" onclick="choose_field('field87')"><span id="feedback87"></span></div>
		<div class="cell size"><img id="field88" src="img/empty.png" class="size main_img" onclick="choose_field('field88')"><span id="feedback88"></span></div>
		<div class="cell size"><img id="field89" src="img/empty.png" class="size main_img" onclick="choose_field('field89')"><span id="feedback89"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field90" src="img/empty.png" class="size main_img" onclick="choose_field('field90')"><span id="feedback90"></span></div>
		<div class="cell size"><img id="field91" src="img/empty.png" class="size main_img" onclick="choose_field('field91')"><span id="feedback91"></span></div>
		<div class="cell size"><img id="field92" src="img/empty.png" class="size main_img" onclick="choose_field('field92')"><span id="feedback92"></span></div>
		<div class="cell size"><img id="field93" src="img/empty.png" class="size main_img" onclick="choose_field('field93')"><span id="feedback93"></span></div>
		<div class="cell size"><img id="field94" src="img/empty.png" class="size main_img" onclick="choose_field('field94')"><span id="feedback94"></span></div>
		<div class="cell size"><img id="field95" src="img/empty.png" class="size main_img" onclick="choose_field('field95')"><span id="feedback95"></span></div>
		<div class="cell size"><img id="field96" src="img/empty.png" class="size main_img" onclick="choose_field('field96')"><span id="feedback96"></span></div>
		<div class="cell size"><img id="field97" src="img/empty.png" class="size main_img" onclick="choose_field('field97')"><span id="feedback97"></span></div>
		<div class="cell size"><img id="field98" src="img/empty.png" class="size main_img" onclick="choose_field('field98')"><span id="feedback98"></span></div>
		<div class="cell size"><img id="field99" src="img/empty.png" class="size main_img" onclick="choose_field('field99')"><span id="feedback99"></span></div>		
	<div style="clear:both"></div>
</div>	

<div id="finish_button" onclick="finished()"><img src="img/finish.png"></div>
<div id="help_button"  onclick="open_help()"><img src="img/help.png"></div>
<div id="build_button" onclick="open_build()"><img src="img/build.png"></div>
<div id="cell_discription"></div>

<div id="help" style="display:none">
      <h1>Welcome to Byggstad!</h1>
<p>Well, Byggstad is approved but it was not yet even been planned :(. So we need you help to plan this nice place. </p>
<p>Choose any cell in a city grid to build there something. Once cell is selected you can click button "Build" to choose options from building menu. Once you decided what you want to see at this cell press the picture. Don't worry about the money - just try to build a nice big town. Remember that people want to have homes, work, places to have fun, educational places and emergency services. Of course all have to be connected with a road network.</br>
Please pay attantion to social, economical, enviropmental and financial aspects of the city. These criteria are very important for us!</br> Once you are done, just press "Finish".</p>
<button onclick="close_help()">Close</button>
    </div>


<div id="build"  style="display:none">
	<h2>Choose category</h2>
	<div class="cell" onclick="choosen_field(0)"><img src="img/empty.png" class="sizeS"><br><b>Empty space</b></div>
	<div class="cell" onclick="build_category('road_category')"><img src="img/roadH.png" class="sizeS"><br><b>Roads</b></div>
	<div class="cell" onclick="build_category('housing_category')"><img src="img/homes.png" class="sizeS"><br><b>Housing</b></div>
	<div class="cell" onclick="build_category('job_category')"><img src="img/work.png" class="sizeS"><br><b>Job districts</b></div>
	<div class="cell" onclick="build_category('entertainment_category')"><img src="img/museum.png" class="sizeS"><br><b>Entertainment areas</b></div>
	<div class="cell" onclick="build_category('energy_category')"><img src="img/nuclear.png" class="sizeS"><br><b>Energy sector</b></div>
	<div class="cell" onclick="build_category('education_category')"><img src="img/skolan.png" class="sizeS"><br><b>Educational buildings</b></div>
	<div class="cell" onclick="build_category('emergency_category')"><img src="img/sjukhus.png" class="sizeS"><br><b>Emergency services</b></div>
	<div style="clear:both"></div>
	</br>
	<div id="road_category"  style="display:none">
		<div onclick="choosen_field(1)" class="build_choice"><img src="img/roadH.png" class="sizeM"><b>Road</b></br>Road from north to south</div>
		<div onclick="choosen_field(2)" class="build_choice"><img src="img/roadV.png" class="sizeM"><b>Road</b></br>Road from east to west</div>
		<div onclick="choosen_field(3)" class="build_choice"><img src="img/roadC.png" class="sizeM"><b>Road</b></br>Road cross</div>
		<div onclick="choosen_field(4)" class="build_choice"><img src="img/road1.png" class="sizeM"><b>Road</b></br>T-shape road cross</div>
		<div onclick="choosen_field(5)" class="build_choice"><img src="img/road2.png" class="sizeM"><b>Road</b></br>T-shape road cross</div>
		<div onclick="choosen_field(6)" class="build_choice"><img src="img/road3.png" class="sizeM"><b>Road</b></br>T-shape road cross</div>
		<div onclick="choosen_field(7)" class="build_choice"><img src="img/road4.png" class="sizeM"><b>Road</b></br>T-shape road cross</div>
		<div onclick="choosen_field(8)" class="build_choice"><img src="img/road5.png" class="sizeM"><b>Road</b></br>Turning road</div>
		<div onclick="choosen_field(9)" class="build_choice"><img src="img/road6.png" class="sizeM"><b>Road</b></br>Turning road</div>
		<div onclick="choosen_field(10)" class="build_choice"><img src="img/road7.png" class="sizeM"><b>Road</b></br>Turning road</div>
		<div onclick="choosen_field(11)" class="build_choice"><img src="img/road8.png" class="sizeM"><b>Road</b></br>Turning road</div>
		<div style="clear:both"></div>
	</div>
	<div id="housing_category"  style="display:none">
		<div onclick="choosen_field(12)" class="build_choice"><img src="img/homes.png" class="sizeM"><b>District with villas</b></br> Luxary home for 500 people.</br>People in villas tend to be more</br> social.</div>
		<div onclick="choosen_field(13)" class="build_choice"><img src="img/radhus.png" class="sizeM"><b>District with rådhuset</b></br> Gives home to 1500 people.</div>
		<div onclick="choosen_field(14)" class="build_choice"><img src="img/lagenhet.png" class="sizeM"><b>District with lägenhet</b></br> This is home to 5000 people. Uses more energy and city budget</div>
		<div style="clear:both"></div>
	</div>
	<div id="job_category"  style="display:none">
		<div onclick="choosen_field(15)" class="build_choice"><img src="img/work.png" class="sizeM"><b>Factory</b></br> Factory gives jobs to 7000 people.</br> Uses more energy then office but produce</br> more profits.</div>
		<div onclick="choosen_field(16)" class="build_choice"><img src="img/office.png" class="sizeM"><b>Office district</b></br>Gives jobs to 7000 people.</br> A bit more social place then a factory.</div>
		<div style="clear:both"></div>
	</div>
	<div id="entertainment_category"  style="display:none">
		<div onclick="choosen_field(17)" class="build_choice"><img src="img/park.png" class="sizeM"><b>Park</b></br> Place where up to 10,000 people can relax and enjoy nature.</div>
		<div onclick="choosen_field(18)" class="build_choice"><img src="img/casino.png" class="sizeM"><b>Casino</b></br> Entraiment for adults that gives happiness</br> to 10,000 people. Uses more energy but brings</br> extra money for the city.</div>
		<div onclick="choosen_field(19)" class="build_choice"><img src="img/museum.png" class="sizeM"><b>Museum</b></br> Educational and social fun for up to 10,000 people.</div>
		<div style="clear:both"></div>
	</div>
	<div id="energy_category"  style="display:none">
		<div onclick="choosen_field(20)" class="build_choice"><img src="img/coal.png" class="sizeM"><b>Coal energy station</b></br> Generates enough energy for all city.</div>
		<div onclick="choosen_field(21)" class="build_choice"><img src="img/windmill.png" class="sizeM"><b>Windwill energy generators</b></br>Can produce energy for half of city.</div>
		<div onclick="choosen_field(22)" class="build_choice"><img src="img/nuclear.png" class="sizeM"><b>Nuclear power station</b></br>Generates energy for entire city.</div>
		<div style="clear:both"></div>
	</div>
	<div id="education_category"  style="display:none">
		<div onclick="choosen_field(23)" class="build_choice"><img src="img/dagis.png" class="sizeM"><b>Förskola</b></br>Place to learn and play for 2500 kids.</div>
		<div onclick="choosen_field(24)" class="build_choice"><img src="img/skolan.png" class="sizeM"><b>Skola</b></br>Provides education for 12,000 students.</div>
		<div onclick="choosen_field(25)" class="build_choice"><img src="img/hogskolan.png" class="sizeM"><b>Högskola</b></br>Can give higher education for all students in the city.</div>
		<div style="clear:both"></div>
	</div>
	<div id="emergency_category"  style="display:none">
		<div onclick="choosen_field(26)" class="build_choice"><img src="img/brandstation.png" class="sizeM"><b>Brandstation</b></br>Making sure that 100,000 people are safe.</div>
		<div onclick="choosen_field(27)" class="build_choice"><img src="img/polis.png" class="sizeM"><b>Polis</b></br>Operates best in areas with less then 100,000 people.</div>
		<div onclick="choosen_field(28)" class="build_choice"><img src="img/sjukhus.png" class="sizeM"><b>Sjukhus</b></br>Has capacity to deal with 50,000 people.</div>
		<div style="clear:both"></div>
	</div>
	
	<button onclick="close_build()">Close</button>
</div>
<div id="Feedback_field" style="display:none">
<div id="CommentsDIV">
<h1>You have created your town!</h1>
<div id="Comments"></div>
<div id="Plots"></div>
<div id="FinalComments"></div>

</div>

<div id="TweetsDIV"></div>
</div>
<script>
var options=[99,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
	fields = [],
	rows=10,
	homes=[],
	companies=[],
	active_cell="",
	
	fields_disc=[
		["Empty field", "Nothing happens here"],
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["Road", "Road connects objects together"],	
		["District with villas", "Private homes for 500 people. People in villas tend to be more social."],	
		["District with rådhuset", "Gives home to 1500 people."],	
		["District with lägenhet", "This is home to 5000 people. Uses more energy and city budget"],	
		["Factory", "Factory gives jobs to 7000 people. Uses more energy then office but produce more profits."],	
		["Office district", "Gives jobs to 7000 people. A bit more social place then a factory."],	
		["Park", "Place where up to 10,000 people can relax and enjoy nature."],	
		["Casino", "Entraiment for adults that gives happiness to 10,000 people. Uses more energy but brings extra money for the city."],	
		["Museum", "Educational and social fun for up to 10,000 people."],	
		["Coal energy station", "Generates enough energy for all city."],	
		["Windwill energy generators", "Can produce energy for half of city."],	
		["Nuclear power station", "Generates energy for entire city."],	
		["Förskola", "Place to learn and play for 2500 kids."],	
		["Skola", "Provides education for 12,000 students."],	
		["Högskola", "Can give higher education for all students in the city."],	
		["Brandstation", "Making sure that 100,000 people are safe."],	
		["Polis", "Operates best in areas with less then 100,000 people."],	
		["Sjukhus", "Has capacity to deal with 50,000 people."]		
	];


for ( var y = 0; y < (rows+2); y++ ) { //for calculation purposes I need 0 and row+1
    fields[ y ] = [];
	for ( var x = 0; x < (rows+2); x++ ) {
		fields[ y ][x] = [0,0,0,0,0,100];
	}
}
	
/*	fields[][][0] = [];//type
	fields[][][1] = [];//traffic
	fields[][][2] = [];//surroundings
	fields[][][3] = [];//pollution
	fields[][][4] = [];//connection to road
	fields[][][5] = [];//happiness
	
	for companies it is only if there are enought people to work and I know coordinates of companies from array comapnies.
*/

function open_help() {	
	document.getElementById("help").style.display = "block";
}

function close_help() {	
	document.getElementById("help").style.display = "none";
}

function choose_field(field) {
	var temp_field;
	if (active_cell!="") {
	temp_field=active_cell.replace("field", "feedback");
	document.getElementById(temp_field).innerHTML="";
	}
	active_cell=field;
	temp_field=active_cell.replace("field", "feedback");
	document.getElementById(temp_field).innerHTML="<img src=\"img/frame.png\" class=\"size feedback_img\">";
	temp_field=fields[(parseInt(field.charAt(5))+1)][(parseInt(field.charAt(6))+1)][0];
	document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[temp_field][0]+"</h3><p>"+ fields_disc[temp_field][1]+"</p>";
}

function open_build() {	
	if (active_cell!="") document.getElementById("build").style.display = "block";
}

function close_build() {	
	document.getElementById("build").style.display = "none";
}

function build_category(category) {
document.getElementById("road_category").style.display = "none";
document.getElementById("housing_category").style.display = "none";
document.getElementById("job_category").style.display = "none";
document.getElementById("entertainment_category").style.display = "none";
document.getElementById("energy_category").style.display = "none";
document.getElementById("education_category").style.display = "none";
document.getElementById("emergency_category").style.display = "none";
document.getElementById(category).style.display = "block";
}


function choosen_field(option) {
var field=active_cell;
		options[option]++;
		options[fields[parseInt(field.charAt(5))+1][parseInt(field.charAt(6))+1][0]]--;
	fields[parseInt(field.charAt(5))+1][parseInt(field.charAt(6))+1][0]=option;
	
	
	
	
	switch (option) {
		case 0: document.getElementById(field).src="img/empty.png";
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 1: document.getElementById(field).src="img/roadH.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 2: document.getElementById(field).src="img/roadV.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 3: document.getElementById(field).src="img/roadC.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 4: document.getElementById(field).src="img/road1.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 5: document.getElementById(field).src="img/road2.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 6: document.getElementById(field).src="img/road3.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 7: document.getElementById(field).src="img/road4.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 8: document.getElementById(field).src="img/road5.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 9: document.getElementById(field).src="img/road6.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;	
		case 10: document.getElementById(field).src="img/road7.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;	
		case 11: document.getElementById(field).src="img/road8.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 12: document.getElementById(field).src="img/homes.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 13: document.getElementById(field).src="img/radhus.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 14: document.getElementById(field).src="img/lagenhet.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;	
		case 15: document.getElementById(field).src="img/work.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 16: document.getElementById(field).src="img/office.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 17: document.getElementById(field).src="img/park.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 18: document.getElementById(field).src="img/casino.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;	
		case 19: document.getElementById(field).src="img/museum.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;		
		case 20: document.getElementById(field).src="img/coal.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;	
		case 21: document.getElementById(field).src="img/windmill.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 22: document.getElementById(field).src="img/nuclear.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 23: document.getElementById(field).src="img/dagis.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;	
		case 24: document.getElementById(field).src="img/skolan.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 25: document.getElementById(field).src="img/hogskolan.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 26: document.getElementById(field).src="img/brandstation.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 27: document.getElementById(field).src="img/polis.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;
		case 28: document.getElementById(field).src="img/sjukhus.png"; 
		document.getElementById("cell_discription").innerHTML="<h3>"+ fields_disc[option][0]+"</h3><p>"+ fields_disc[option][1]+"</p>";break;	
	}
	
	document.getElementById("build").style.display = "none";	
}



function finished(){
var general_state, total_score=100, Comments;


var max_population=options[12]*500+options[13]*1500+options[14]*5000;
var max_workplace=options[15]*7000+options[16]*7000+options[17]*500+options[18]*500+options[19]*500+options[20]*500+options[21]*500+options[22]*500+options[23]*500+options[24]*500+options[25]*500+options[26]*500+options[27]*500+options[28]*500;
var max_entertaiment=options[17]*10000+options[18]*10000+options[19]*10000;


Comments="<h2>Tweets from you citizens</h2><table id=\"tweets\">";

if((max_workplace/max_population)<0.9) {Comments=Comments + tweeting(0); total_score=(max_workplace/max_population)*total_score;} else {total_score=total_score*1.02} //unemplyment
if((max_workplace/max_population)>1.3) {Comments=Comments + tweeting(1); total_score=0.9*total_score;}  else {total_score=total_score*1.02} //lack of workers
if((max_entertaiment/max_population)<0.8) {Comments=Comments + tweeting(2); total_score=0.9*total_score;} else {total_score=total_score*1.02} //lack of entertaiment
if (options[20]<1&&options[21]<2&&options[22]<1) {Comments=Comments + tweeting(3); total_score=0.7*total_score;} //lack of energy
if (((options[23]*50000)/max_population)<0.8) {Comments=Comments + tweeting(4); total_score=0.8*total_score;} //lack of dagis
if (((options[24]*80000)/max_population)<0.8) {Comments=Comments + tweeting(5); total_score=0.8*total_score;} //lack of schools
if (options[25]<1) {Comments=Comments + tweeting(6); total_score=0.8*total_score;} //lack of a university
if (((options[26]*100000)/max_population)<0.8) {Comments=Comments + tweeting(7); total_score=0.8*total_score;} //lack of fire station
if (((options[27]*100000)/max_population)<0.8) {Comments=Comments + tweeting(8); total_score=0.8*total_score;} //lack of polis
if (((options[28]*50000)/max_population)<0.8) {Comments=Comments + tweeting(9); total_score=0.8*total_score;} //lack of hospitals

if (total_score>99) Comments=Comments + tweeting(10);



	for ( var x = 1; x < (rows+1); x++ ) {
		for ( var y = 1; y < (rows+1); y++ ) {
		var happiness=total_score;
		
			if (fields[x][y][0]==12||fields[x][y][0]==13||fields[x][y][0]==14){ //if it is house
				homes.push([x,y]);
				/*TRAFFIC*/
				if (fields[x+1][y][0]>0&&fields[x+1][y][0]<12) {fields[x+1][y][1]++; fields[x][y][4]=1;}
				if (fields[x-1][y][0]>0&&fields[x+1][y][0]<12) {fields[x-1][y][1]++; fields[x][y][4]=1;}
				if (fields[x][y+1][0]>0&&fields[x+1][y][0]<12) {fields[x][y+1][1]++; fields[x][y][4]=1;}
				if (fields[x][y-1][0]>0&&fields[x+1][y][0]<12) {fields[x][y-1][1]++; fields[x][y][4]=1;}			
				
				/*POLLUTION FROM FACTORY, NUCLEAR or COAL POWER STATIONS*/
				if (x!=9 && (fields[x+1][y][0]==15 || fields[x+1][y][0]==20 || fields[x+1][y][0]==22)) {fields[x][y][3]++; happiness=happiness-15;}
				if (x!=0 && (fields[x-1][y][0]==15 || fields[x-1][y][0]==20 || fields[x-1][y][0]==22)) {fields[x][y][3]++; happiness=happiness-15;} 
				if (y!=9 && (fields[x][y+1][0]==15 || fields[x][y+1][0]==20 || fields[x][y+1][0]==22)) {fields[x][y][3]++; happiness=happiness-15;} 
				if (y!=0 && (fields[x][y-1][0]==15 || fields[x][y-1][0]==20 || fields[x][y-1][0]==22)) {fields[x][y][3]++; happiness=happiness-15;}				
				if (fields[x][y][3]>2) {happiness=happiness-10; Comments=Comments + tweeting(11);}
				/*ENTERTAIMENT*/
				if (x!=9 && (fields[x+1][y][0]==17 || fields[x+1][y][0]==18 || fields[x+1][y][0]==19)) {happiness=happiness+10;}
				if (x!=0 && (fields[x-1][y][0]==17 || fields[x-1][y][0]==18 || fields[x-1][y][0]==19)) {happiness=happiness+10;} 
				if (y!=9 && (fields[x][y+1][0]==17 || fields[x][y+1][0]==18 || fields[x][y+1][0]==19)) {happiness=happiness+10;} 
				if (y!=0 && (fields[x][y-1][0]==17 || fields[x][y-1][0]==18 || fields[x][y-1][0]==19)) {happiness=happiness+10;}				
				/*ROAD CONNECTIVITY*/
				if (fields[x][y][4]!=1) {happiness=10;	Comments=Comments + tweeting(12);}	// not connected					
				
				fields[x][y][5]=happiness;
				
			}
			
			if (fields[x][y][0]==15||fields[x][y][0]==16){ //if it is FACTORY or OFFICE
				companies.push([x,y]);
				/*TRAFFIC*/
				if (fields[x+1][y][0]>0&&fields[x+1][y][0]<12) {fields[x+1][y][1]++; fields[x][y][4]=1;}
				if (fields[x-1][y][0]>0&&fields[x+1][y][0]<12) {fields[x-1][y][1]++; fields[x][y][4]=1;}
				if (fields[x][y+1][0]>0&&fields[x+1][y][0]<12) {fields[x][y+1][1]++; fields[x][y][4]=1;}
				if (fields[x][y-1][0]>0&&fields[x+1][y][0]<12) {fields[x][y-1][1]++; fields[x][y][4]=1;}	
				
				/*Competition FROM COMPANIES*/
				if (x!=9 && (fields[x+1][y][0]==15 || fields[x+1][y][0]==16)) {fields[x][y][3]++;}
				if (x!=0 && (fields[x-1][y][0]==15 || fields[x-1][y][0]==16)) {fields[x][y][3]++;} 
				if (y!=9 && (fields[x][y+1][0]==15 || fields[x][y+1][0]==16)) {fields[x][y][3]++;} 
				if (y!=0 && (fields[x][y-1][0]==15 || fields[x][y-1][0]==16)) {fields[x][y][3]++;}
				if (x!=9 && y!=9 && (fields[x+1][y+1][0]==15 || fields[x+1][y+1][0]==16)) {fields[x][y][3]++;}
				if (x!=0 && y!=9 && (fields[x-1][y+1][0]==15 || fields[x-1][y+1][0]==16)) {fields[x][y][3]++;} 
				if (x!=9 && y!=0 && (fields[x+1][y-1][0]==15 || fields[x+1][y-1][0]==16)) {fields[x][y][3]++;} 
				if (x!=0 && y!=0 && (fields[x-1][y-1][0]==15 || fields[x-1][y-1][0]==16)) {fields[x][y][3]++;} 
				if (fields[x][y][2]>2) {happiness=happiness-30; Comments=Comments + tweeting(13);}
				
				/*ROAD CONNECTIVITY*/
				if (fields[x][y][4]!=1) {happiness=10;	Comments=Comments + tweeting(14);}	// not connected					
				
				fields[x][y][5]=happiness; 				
			}
			
			if (fields[x][y][0]>15){ //if other objects
				/*TRAFFIC ROAD CONNECTIVITY*/
				if (fields[x+1][y][0]>0&&fields[x+1][y][0]<12) {fields[x+1][y][1]++; fields[x][y][4]=1;}
				if (fields[x-1][y][0]>0&&fields[x+1][y][0]<12) {fields[x-1][y][1]++; fields[x][y][4]=1;}
				if (fields[x][y+1][0]>0&&fields[x+1][y][0]<12) {fields[x][y+1][1]++; fields[x][y][4]=1;}
				if (fields[x][y-1][0]>0&&fields[x+1][y][0]<12) {fields[x][y-1][1]++; fields[x][y][4]=1;}		
				if (fields[x][y][4]!=1) {happiness=10;	Comments=Comments + tweeting(fields[x][y][0]-2);}	// not connected				
				fields[x][y][5]=happiness; 				
			}
			
	
			
			if (fields[x][y][0]==1){ //if it is a road
				/*TRAFFIC*/
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==2){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++; 
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==3){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++; 
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==4){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==5){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==6){ //if it is a road
				/*TRAFFIC*/
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++; 
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==7){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++; 
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++; 
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==8){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++; 

				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==9){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==10){ //if it is a road
				/*TRAFFIC*/
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
			
			if (fields[x][y][0]==11){ //if it is a road
				/*TRAFFIC*/
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++; 
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++; 
				
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + tweeting(27);}				
			}
		}
	}

	var traveled_distance=0, counter=0; //calculate travel distance
	for ( var x = 0; x < homes.length; x++ ) {
		for ( var y = 0; y < companies.length; y++ ) {			
			traveled_distance=traveled_distance+Math.sqrt(Math.pow((homes[x][0]-companies[y][0]), 2)+Math.pow((homes[x][1]-companies[y][1]), 2));
			counter++;		
		}
	}
	if (counter>0) traveled_distance=traveled_distance/counter;

/*Criteria*/
var Energy, Economics, Enviropment, Social;
	
Energy=options[20]*100+options[21]*50+options[22]*100-options[12]*1-options[13]*2-options[14]*5-options[15]*30-options[16]*15-options[18]*5-(options[26]+options[27]+options[28])*3;
Economics=options[12]*2+options[13]*2+options[14]*1+options[15]*30+options[16]*15+options[18]*6+options[25]*5-(options[26]+options[27]+options[28])*3;
Enviropment=options[15]*10+options[17]*30-options[20]*40-options[21]*15
Social=(options[1]+options[2]+options[3]+options[4]+options[5]+options[6]+options[7]+options[8]+options[9]+options[10]+options[11])*2+options[12]*2+options[16]*5+options[19]*5-options[22]*20+(options[23]+options[24]+options[25])*3-options[27]*3+options[28]*3+max_population/10000;

google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
        ["Indicator", "Value", { role: "style" } ],
        ["Energy", Energy, "gold"],
        ["Economics", Economics, "blue"],
        ["Enviropment", Enviropment, "green"],
        ["Social", Social, "red"]
      ]);

        var view = new google.visualization.DataView(data);
      view.setColumns([0, 1,
                       { calc: "stringify",
                         sourceColumn: 1,
                         type: "string",
                         role: "annotation" },
                       2]);

      var options = {
        title: "City Development Indicators",
        bar: {groupWidth: "95%"},
        legend: { position: "none" },
      };
      var chart = new google.visualization.ColumnChart(document.getElementById("Plots"));
      chart.draw(view, options);
  }



/*SHOW RESULTS*/
	total_score=total_score*10;
	for ( var x = 1; x < (rows+1); x++ ) {
		for ( var y = 1; y < (rows+1); y++ ) {
			fields[x][y][5]+=60-(traveled_distance*10);
			if (fields[x][y][0]>0&&fields[x][y][0]<12) total_score+=fields[x][y][5]/25;
			if (fields[x][y][0]>11) total_score+=fields[x][y][5]/15;
			
			
			var reference="feedback" + (x-1) + (y-1);
			if (fields[x][y][5]>95) document.getElementById(reference).innerHTML="<img src=\"img/happy.png\" class=\"size feedback_img\" title=\""+ fields[x][y][5] +"\">";
			else {if (fields[x][y][5]>75) document.getElementById("feedback" + (x-1) + (y-1)).innerHTML="<img src=\"img/OK.png\" class=\"size feedback_img\" title=\""+ fields[x][y][5] +"\">";
			else document.getElementById(reference).innerHTML="<img src=\"img/sad.png\" class=\"size feedback_img\" title=\""+ fields[x][y][5] +"\">";
			}
			if (fields[x][y][0]==0) document.getElementById(reference).innerHTML="<img src=\"img/empty.png\" class=\"size feedback_img\">";
		}
	}
total_score+=max_population/500;
total_score+=max_workplace/500;
total_score+=(options[17]+options[18]+options[19]+options[20]+options[21]+options[22]+options[23]+options[24]+options[25]+options[26]+options[27]+options[28])*10;

if (traveled_distance<2.5) {Comments=Comments + tweeting(28); total_score+=400;}
else {if (traveled_distance<6) Comments=Comments + tweeting(29);
	else {Comments=Comments + tweeting(30);total_score-=200;}}

if 	(max_population==0) total_score=0;
Comments=Comments + "</table>";
document.getElementById("TweetsDIV").innerHTML=Comments;

Comments="";
Comments=Comments + "<p><b>Maximum population: </b>" + max_population + "</br>";
Comments=Comments + "<p><b>Maximum work places: </b>" + max_workplace + "</br>";
Comments=Comments + "<p><b>Maximum relaxation places: </b>" + max_entertaiment + "</br></p></br>";
document.getElementById("Comments").innerHTML=Comments;
Comments="<p><b>Your final score: </b>" + Math.round(total_score);
Comments=Comments + ". <i>The highest ever score is 3045. So, do you think you can do better?</i></p>";
document.getElementById("Feedback_field").style.display = "block";

document.getElementById("FinalComments").innerHTML=Comments;
document.getElementById("finish_button").style.display = "none";
document.getElementById("help_button").style.display = "none";
document.getElementById("build_button").style.display = "none";
document.getElementById("cell_discription").style.display = "none";
	
}

 
</script>	
	
</body>
</html>
