<html>
<head>
<title>Road2Science game</title>
  <meta charset="utf-8">

<style>



.cell {
	position: relative;
	border:1px solid black;

	float: left;
	display:inline-block;
}

	

.main_img {
	position: absolute;
	z-index: 1;
}

.feedback_img {
	position: absolute;
	z-index: 3;
}
.build_choice {
	position:relative;
	float:left;
	display:inline-block;
	margin:10px;
	padding:10px;
	background-color:#fcfcc1;
	border-radius: 10px;
	border: 2px solid #9f900b;}
	
.sizeS {height:11vw;
	width:11vw;}
	
.sizeM {height:5vw;
	width:5vw;}
	
.amount {
	position:relative;
	left:-1vw;
	top:-4vw;
	padding:5px;
	background-color:#880015;
	display:inline-block;
	border-radius: 50%;
    font-weight: bold;
    color: white;
	width:18px;
	height:18px;
	text-align: center;}

.border {
	border:2px solid red;}

#build {
	position:absolute;
	top:10vh;
	left:10vw;
	width:80vw;
	background-color: white;
	padding: 10px;
	border: 2px solid black;
	z-index: 90;}

		
/* Landscape */
@media screen and (orientation:landscape) {
   .size {
		height:7.4vh;
		width:7.4vh;}
	#playfield {
		height:80vh;
		width:80vh;
		margin-left: calc(40vw - 40vh);}
		
	#finish_button {
		position: absolute;
		right: 2vh;
		bottom: 2vh;}
	
	#help_button {
		position: absolute;
		right: 2vh;
		bottom: 15vh;}
		
	#build_button {
		position: absolute;
		right: 2vh;
		bottom: 28vh;}
		
	#cell_discription {
		position: absolute;
		right: 2vh;
		top: 2vh;
		height: 55vh;
		width: 20vh;}
		
	#help_button img, #build_button img, #finish_button img{
		height:10vh;
		width:10vh;}
		
	#help {
		position:absolute;
		top:10vh;
		left:15vw;
		width:70vw;		
		background-color: white;
		padding: 10px;
		border: 2px solid black;
		z-index: 99;}

		
}

/* Portrait */
@media screen and (orientation:portrait) {
   .size {
		height:7.4vw;
		width:7.4vw;}
		
	#playfield {
		height:80vw;
		width:80vw;
		margin: 0 auto;
		}
		
	#finish_button {
		position: absolute;
		right: 2vw;
		bottom: 2vw;}
		
	#help_button {
		position: absolute;
		right: 15vw;
		bottom: 2vw;}
		
	#build_button {
		position: absolute;
		right: 28vw;
		bottom: 2vw;}
	
	#cell_discription {
		position: absolute;
		left: 2vw;
		bottom: 2vw;
		height: 20vw;
		width: 55vw;}
		
	#help_button img, #build_button img, #finish_button img{
		height:10vw;
		width:10vw;}
		
	#help {
	position:absolute;
	top:10vh;
	left:10vw;
	width:80vw;
	background-color: white;
	padding: 10px;
	border: 2px solid black;
	z-index: 99;}
		
}


</style>


</head>

<body>
<div id="playfield">
	<div style="clear:both"></div>
		<div class="cell size"><img id="field00" src="img/empty.png" class="size main_img" onclick="choose_field('field00')"><span id="feedback00"></span></div>
		<div class="cell size"><img id="field01" src="img/empty.png" class="size main_img" onclick="choose_field('field01')"><span id="feedback01"></span></div>
		<div class="cell size"><img id="field02" src="img/empty.png" class="size main_img" onclick="choose_field('field02')"><span id="feedback02"></span></div>
		<div class="cell size"><img id="field03" src="img/empty.png" class="size main_img" onclick="choose_field('field03')"><span id="feedback03"></span></div>
		<div class="cell size"><img id="field04" src="img/empty.png" class="size main_img" onclick="choose_field('field04')"><span id="feedback04"></span></div>
		<div class="cell size"><img id="field05" src="img/empty.png" class="size main_img" onclick="choose_field('field05')"><span id="feedback05"></span></div>
		<div class="cell size"><img id="field06" src="img/empty.png" class="size main_img" onclick="choose_field('field06')"><span id="feedback06"></span></div>
		<div class="cell size"><img id="field07" src="img/empty.png" class="size main_img" onclick="choose_field('field07')"><span id="feedback07"></span></div>
		<div class="cell size"><img id="field08" src="img/empty.png" class="size main_img" onclick="choose_field('field08')"><span id="feedback08"></span></div>
		<div class="cell size"><img id="field09" src="img/empty.png" class="size main_img" onclick="choose_field('field09')"><span id="feedback09"></span></div>
	<div style="clear:both"></div>
		<div class="cell size"><img id="field10" src="img/empty.png" class="size main_img" onclick="choose_field('field10')"><span id="feedback10"></span></div>
		<div class="cell size"><img id="field11" src="img/empty.png" class="size main_img" onclick="choose_field('field11')"><span id="feedback11"></span></div>
		<div class="cell size"><img id="field12" src="img/empty.png" class="size main_img" onclick="choose_field('field12')"><span id="feedback12"></span></div>
		<div class="cell size"><img id="field13" src="img/empty.png" class="size main_img" onclick="choose_field('field13')"><span id="feedback13"></span></div>
		<div class="cell size"><img id="field14" src="img/empty.png" class="size main_img" onclick="choose_field('field14')"><span id="feedback14"></span></div>
		<div class="cell size"><img id="field15" src="img/empty.png" class="size main_img" onclick="choose_field('field15')"><span id="feedback15"></span></div>
		<div class="cell size"><img id="field16" src="img/empty.png" class="size main_img" onclick="choose_field('field16')"><span id="feedback16"></span></div>
		<div class="cell size"><img id="field17" src="img/empty.png" class="size main_img" onclick="choose_field('field17')"><span id="feedback17"></span></div>
		<div class="cell size"><img id="field18" src="img/empty.png" class="size main_img" onclick="choose_field('field18')"><span id="feedback18"></span></div>
		<div class="cell size"><img id="field19" src="img/empty.png" class="size main_img" onclick="choose_field('field19')"><span id="feedback19"></span></div>
	<div style="clear:both"></div>
		<div class="cell size"><img id="field20" src="img/empty.png" class="size main_img" onclick="choose_field('field20')"><span id="feedback20"></span></div>
		<div class="cell size"><img id="field21" src="img/empty.png" class="size main_img" onclick="choose_field('field21')"><span id="feedback21"></span></div>
		<div class="cell size"><img id="field22" src="img/empty.png" class="size main_img" onclick="choose_field('field22')"><span id="feedback22"></span></div>
		<div class="cell size"><img id="field23" src="img/empty.png" class="size main_img" onclick="choose_field('field23')"><span id="feedback23"></span></div>
		<div class="cell size"><img id="field24" src="img/empty.png" class="size main_img" onclick="choose_field('field24')"><span id="feedback24"></span></div>
		<div class="cell size"><img id="field25" src="img/empty.png" class="size main_img" onclick="choose_field('field25')"><span id="feedback25"></span></div>
		<div class="cell size"><img id="field26" src="img/empty.png" class="size main_img" onclick="choose_field('field26')"><span id="feedback26"></span></div>
		<div class="cell size"><img id="field27" src="img/empty.png" class="size main_img" onclick="choose_field('field27')"><span id="feedback27"></span></div>
		<div class="cell size"><img id="field28" src="img/empty.png" class="size main_img" onclick="choose_field('field28')"><span id="feedback28"></span></div>
		<div class="cell size"><img id="field29" src="img/empty.png" class="size main_img" onclick="choose_field('field29')"><span id="feedback29"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field30" src="img/empty.png" class="size main_img" onclick="choose_field('field30')"><span id="feedback30"></span></div>
		<div class="cell size"><img id="field31" src="img/empty.png" class="size main_img" onclick="choose_field('field31')"><span id="feedback31"></span></div>
		<div class="cell size"><img id="field32" src="img/empty.png" class="size main_img" onclick="choose_field('field32')"><span id="feedback32"></span></div>
		<div class="cell size"><img id="field33" src="img/empty.png" class="size main_img" onclick="choose_field('field33')"><span id="feedback33"></span></div>
		<div class="cell size"><img id="field34" src="img/empty.png" class="size main_img" onclick="choose_field('field34')"><span id="feedback34"></span></div>
		<div class="cell size"><img id="field35" src="img/empty.png" class="size main_img" onclick="choose_field('field35')"><span id="feedback35"></span></div>
		<div class="cell size"><img id="field36" src="img/empty.png" class="size main_img" onclick="choose_field('field36')"><span id="feedback36"></span></div>
		<div class="cell size"><img id="field37" src="img/empty.png" class="size main_img" onclick="choose_field('field37')"><span id="feedback37"></span></div>
		<div class="cell size"><img id="field38" src="img/empty.png" class="size main_img" onclick="choose_field('field38')"><span id="feedback38"></span></div>
		<div class="cell size"><img id="field39" src="img/empty.png" class="size main_img" onclick="choose_field('field39')"><span id="feedback39"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field40" src="img/empty.png" class="size main_img" onclick="choose_field('field40')"><span id="feedback40"></span></div>
		<div class="cell size"><img id="field41" src="img/empty.png" class="size main_img" onclick="choose_field('field41')"><span id="feedback41"></span></div>
		<div class="cell size"><img id="field42" src="img/empty.png" class="size main_img" onclick="choose_field('field42')"><span id="feedback42"></span></div>
		<div class="cell size"><img id="field43" src="img/empty.png" class="size main_img" onclick="choose_field('field43')"><span id="feedback43"></span></div>
		<div class="cell size"><img id="field44" src="img/empty.png" class="size main_img" onclick="choose_field('field44')"><span id="feedback44"></span></div>
		<div class="cell size"><img id="field45" src="img/empty.png" class="size main_img" onclick="choose_field('field45')"><span id="feedback45"></span></div>
		<div class="cell size"><img id="field46" src="img/empty.png" class="size main_img" onclick="choose_field('field46')"><span id="feedback46"></span></div>
		<div class="cell size"><img id="field47" src="img/empty.png" class="size main_img" onclick="choose_field('field47')"><span id="feedback47"></span></div>
		<div class="cell size"><img id="field48" src="img/empty.png" class="size main_img" onclick="choose_field('field48')"><span id="feedback48"></span></div>
		<div class="cell size"><img id="field49" src="img/empty.png" class="size main_img" onclick="choose_field('field49')"><span id="feedback49"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field50" src="img/empty.png" class="size main_img" onclick="choose_field('field50')"><span id="feedback50"></span></div>
		<div class="cell size"><img id="field51" src="img/empty.png" class="size main_img" onclick="choose_field('field51')"><span id="feedback51"></span></div>
		<div class="cell size"><img id="field52" src="img/empty.png" class="size main_img" onclick="choose_field('field52')"><span id="feedback52"></span></div>
		<div class="cell size"><img id="field53" src="img/empty.png" class="size main_img" onclick="choose_field('field53')"><span id="feedback53"></span></div>
		<div class="cell size"><img id="field54" src="img/empty.png" class="size main_img" onclick="choose_field('field54')"><span id="feedback54"></span></div>
		<div class="cell size"><img id="field55" src="img/empty.png" class="size main_img" onclick="choose_field('field55')"><span id="feedback55"></span></div>
		<div class="cell size"><img id="field56" src="img/empty.png" class="size main_img" onclick="choose_field('field56')"><span id="feedback56"></span></div>
		<div class="cell size"><img id="field57" src="img/empty.png" class="size main_img" onclick="choose_field('field57')"><span id="feedback57"></span></div>
		<div class="cell size"><img id="field58" src="img/empty.png" class="size main_img" onclick="choose_field('field58')"><span id="feedback58"></span></div>
		<div class="cell size"><img id="field59" src="img/empty.png" class="size main_img" onclick="choose_field('field59')"><span id="feedback59"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field60" src="img/empty.png" class="size main_img" onclick="choose_field('field60')"><span id="feedback60"></span></div>
		<div class="cell size"><img id="field61" src="img/empty.png" class="size main_img" onclick="choose_field('field61')"><span id="feedback61"></span></div>
		<div class="cell size"><img id="field62" src="img/empty.png" class="size main_img" onclick="choose_field('field62')"><span id="feedback62"></span></div>
		<div class="cell size"><img id="field63" src="img/empty.png" class="size main_img" onclick="choose_field('field63')"><span id="feedback63"></span></div>
		<div class="cell size"><img id="field64" src="img/empty.png" class="size main_img" onclick="choose_field('field64')"><span id="feedback64"></span></div>
		<div class="cell size"><img id="field65" src="img/empty.png" class="size main_img" onclick="choose_field('field65')"><span id="feedback65"></span></div>
		<div class="cell size"><img id="field66" src="img/empty.png" class="size main_img" onclick="choose_field('field66')"><span id="feedback66"></span></div>
		<div class="cell size"><img id="field67" src="img/empty.png" class="size main_img" onclick="choose_field('field67')"><span id="feedback67"></span></div>
		<div class="cell size"><img id="field68" src="img/empty.png" class="size main_img" onclick="choose_field('field68')"><span id="feedback68"></span></div>
		<div class="cell size"><img id="field69" src="img/empty.png" class="size main_img" onclick="choose_field('field69')"><span id="feedback69"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field70" src="img/empty.png" class="size main_img" onclick="choose_field('field70')"><span id="feedback70"></span></div>
		<div class="cell size"><img id="field71" src="img/empty.png" class="size main_img" onclick="choose_field('field71')"><span id="feedback71"></span></div>
		<div class="cell size"><img id="field72" src="img/empty.png" class="size main_img" onclick="choose_field('field72')"><span id="feedback72"></span></div>
		<div class="cell size"><img id="field73" src="img/empty.png" class="size main_img" onclick="choose_field('field73')"><span id="feedback73"></span></div>
		<div class="cell size"><img id="field74" src="img/empty.png" class="size main_img" onclick="choose_field('field74')"><span id="feedback74"></span></div>
		<div class="cell size"><img id="field75" src="img/empty.png" class="size main_img" onclick="choose_field('field75')"><span id="feedback75"></span></div>
		<div class="cell size"><img id="field76" src="img/empty.png" class="size main_img" onclick="choose_field('field76')"><span id="feedback76"></span></div>
		<div class="cell size"><img id="field77" src="img/empty.png" class="size main_img" onclick="choose_field('field77')"><span id="feedback77"></span></div>
		<div class="cell size"><img id="field78" src="img/empty.png" class="size main_img" onclick="choose_field('field78')"><span id="feedback78"></span></div>
		<div class="cell size"><img id="field79" src="img/empty.png" class="size main_img" onclick="choose_field('field79')"><span id="feedback79"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field80" src="img/empty.png" class="size main_img" onclick="choose_field('field80')"><span id="feedback80"></span></div>
		<div class="cell size"><img id="field81" src="img/empty.png" class="size main_img" onclick="choose_field('field81')"><span id="feedback81"></span></div>
		<div class="cell size"><img id="field82" src="img/empty.png" class="size main_img" onclick="choose_field('field82')"><span id="feedback82"></span></div>
		<div class="cell size"><img id="field83" src="img/empty.png" class="size main_img" onclick="choose_field('field83')"><span id="feedback83"></span></div>
		<div class="cell size"><img id="field84" src="img/empty.png" class="size main_img" onclick="choose_field('field84')"><span id="feedback84"></span></div>
		<div class="cell size"><img id="field85" src="img/empty.png" class="size main_img" onclick="choose_field('field85')"><span id="feedback85"></span></div>
		<div class="cell size"><img id="field86" src="img/empty.png" class="size main_img" onclick="choose_field('field86')"><span id="feedback86"></span></div>
		<div class="cell size"><img id="field87" src="img/empty.png" class="size main_img" onclick="choose_field('field87')"><span id="feedback87"></span></div>
		<div class="cell size"><img id="field88" src="img/empty.png" class="size main_img" onclick="choose_field('field88')"><span id="feedback88"></span></div>
		<div class="cell size"><img id="field89" src="img/empty.png" class="size main_img" onclick="choose_field('field89')"><span id="feedback89"></span></div>
	<div style="clear:both"></div>	
		<div class="cell size"><img id="field90" src="img/empty.png" class="size main_img" onclick="choose_field('field90')"><span id="feedback90"></span></div>
		<div class="cell size"><img id="field91" src="img/empty.png" class="size main_img" onclick="choose_field('field91')"><span id="feedback91"></span></div>
		<div class="cell size"><img id="field92" src="img/empty.png" class="size main_img" onclick="choose_field('field92')"><span id="feedback92"></span></div>
		<div class="cell size"><img id="field93" src="img/empty.png" class="size main_img" onclick="choose_field('field93')"><span id="feedback93"></span></div>
		<div class="cell size"><img id="field94" src="img/empty.png" class="size main_img" onclick="choose_field('field94')"><span id="feedback94"></span></div>
		<div class="cell size"><img id="field95" src="img/empty.png" class="size main_img" onclick="choose_field('field95')"><span id="feedback95"></span></div>
		<div class="cell size"><img id="field96" src="img/empty.png" class="size main_img" onclick="choose_field('field96')"><span id="feedback96"></span></div>
		<div class="cell size"><img id="field97" src="img/empty.png" class="size main_img" onclick="choose_field('field97')"><span id="feedback97"></span></div>
		<div class="cell size"><img id="field98" src="img/empty.png" class="size main_img" onclick="choose_field('field98')"><span id="feedback98"></span></div>
		<div class="cell size"><img id="field99" src="img/empty.png" class="size main_img" onclick="choose_field('field99')"><span id="feedback99"></span></div>		
	<div style="clear:both"></div>
</div>	

<div id="finish_button" onclick="finished()"><img src="img/finish.png"></div>
<div id="help_button"  onclick="open_help()"><img src="img/help.png"></div>
<div id="build_button" onclick="open_build()"><img src="img/build.png"></div>
<div id="cell_discription"></div>

<div id="help" style="display:none">
      <h1>Welcome to Byggstad!</h1>
      <p>Well, Byggstad is approved but it wased yet even been planned :(. So we need you help to plan this nice place. </p>
<p>Choose any cell in a grid to build there something. Once cell is selected you can see number of options that can be build. Once you decided what you want to see at this cell press "CHOOSE" behind the picture. Don't worry about the money - just try to build a nice big town. Remember that people want to have homes, work and places to have fun. Of course all have to be connected with a road network. Ah, and some resourses are limited (you can have max 9 houses districts, 5 job sectors atc as written near each type).</br>
Once you are done, just press "Finish"</p>
<button onclick="close_help()">Close</button>
    </div>


<div id="build"  style="display:none">
	<h2>Choose category</h2>
	<div class="cell" onclick="choosen_field(0)"><img src="img/empty.png" class="sizeS"><br><b>Empty space</b></div>
	<div class="cell" onclick="build_category('road_category')"><img src="img/roadH.png" class="sizeS"><br><b>Roads</b></div>
	<div class="cell" onclick="build_category('housing_category')"><img src="img/homes.png" class="sizeS"><br><b>Housing</b></div>
	<div class="cell" onclick="build_category('job_category')"><img src="img/work.png" class="sizeS"><br><b>Job districts</b></div>
	<div class="cell" onclick="build_category('relax_category')"><img src="img/park.png" class="sizeS"><br><b>Entertaiment areas</b></div>
	<div style="clear:both"></div>
	</br>
	<div id="road_category"  style="display:none">
		<div onclick="choosen_field(1)" class="build_choice"><img src="img/roadH.png" class="sizeM"><div class="amount" id="option1">15</div>road from north to south</div>
		<div onclick="choosen_field(2)" class="build_choice"><img src="img/roadV.png" class="sizeM"><div class="amount" id="option2">15</div>road from east to west</div>
		<div onclick="choosen_field(3)" class="build_choice"><img src="img/roadC.png" class="sizeM"><div class="amount" id="option3">10</div>road cross</div>
		<div style="clear:both"></div>
	</div>
	<div id="housing_category"  style="display:none">
		<div onclick="choosen_field(4)" class="build_choice"><img src="img/homes.png" class="sizeM"><div class="amount" id="option4">9</div>house district gives home to 1000 people</div>
		<div style="clear:both"></div>
	</div>
	<div id="job_category"  style="display:none">
		<div onclick="choosen_field(5)" class="build_choice"><img src="img/work.png" class="sizeM"><div class="amount" id="option5">5</div>commercial distric gives jobs to 2000 people</div>
		<div style="clear:both"></div>
	</div>
	<div id="relax_category"  style="display:none">
		<div onclick="choosen_field(6)" class="build_choice"><img src="img/park.png" class="sizeM"><div class="amount" id="option6">3</div>relaxing field gives happiness to 3000 people</div>
		<div style="clear:both"></div>
	</div>
	<button onclick="close_build()">Close</button>
</div>

<div id="CommentsDIV"></div>
<script>
var options=[99,15,15,10,9,5,3],
	fields = [],
	rows=5,
	homes=[],
	companies=[],
	active_cell="",
	fields_names=["Empty space", "Road","Road","Road", "Homes", "Work ares", "Entartatiment area"];
	fields_disc=["nothing happens here", "road connects objects together","road connects objects together","road connects objects together", "house district gives home to 1000 people", "commercial distric gives jobs to 2000 people", "relaxing field gives happiness to 3000 people"];


for ( var y = 0; y < (rows+2); y++ ) { //for calculation purposes I need 0 and row+1
    fields[ y ] = [];
	for ( var x = 0; x < (rows+2); x++ ) {
		fields[ y ][x] = [0,0,0,0,0,100];
	}
}
	
/*	fields[][][0] = [];//type
	fields[][][1] = [];//traffic
	fields[][][2] = [];//park connection
	fields[][][3] = [];//pollution
	fields[][][4] = [];//connection to road
	fields[][][5] = [];//happiness
	
	for companies it is only if there are enought people to work and I know coordinates of companies from array comapnies.
*/

function open_help() {	
	document.getElementById("help").style.display = "block";
}

function close_help() {	
	document.getElementById("help").style.display = "none";
}

function choose_field(field) {
	var temp_field;
	if (active_cell!="") {
	temp_field=active_cell.replace("field", "feedback");
	document.getElementById(temp_field).innerHTML="";
	}
	active_cell=field;
	temp_field=active_cell.replace("field", "feedback");
	document.getElementById(temp_field).innerHTML="<img src=\"img/frame.png\" class=\"size feedback_img\">";
	temp_field=fields[parseInt(field.charAt(5))][parseInt(field.charAt(6))][0];
	document.getElementById("cell_discription").innerHTML="<h3>"+ fields_names[temp_field]+"</h3><p>"+ fields_disc[temp_field]+"</p>";
}

function open_build() {	
	if (active_cell!="") document.getElementById("build").style.display = "block";
}

function close_build() {	
	document.getElementById("build").style.display = "none";
}

function build_category(category) {
document.getElementById("road_category").style.display = "none";
document.getElementById("housing_category").style.display = "none";
document.getElementById("job_category").style.display = "none";
document.getElementById("relax_category").style.display = "none";
document.getElementById(category).style.display = "block";
}


function choosen_field(option) {
	if (options[option]==0) {alert ("You don't have this card anymore");return;}
	var field=active_cell;
	options[fields[parseInt(field.charAt(5))][parseInt(field.charAt(6))][0]]++;
	options[option]--;
	
	for ( var y = 1; y < 7; y++ ) {
		var field_name="option" + y;
		document.getElementById(field_name).innerHTML=options[y];
	}

	switch (option) {
		case 0: document.getElementById(field).src="img/empty.png"; break;
		case 1: document.getElementById(field).src="img/roadH.png"; break;
		case 2: document.getElementById(field).src="img/roadV.png"; break;
		case 3: document.getElementById(field).src="img/roadC.png"; break;
		case 4: document.getElementById(field).src="img/homes.png"; break;
		case 5: document.getElementById(field).src="img/work.png"; break;
		case 6: document.getElementById(field).src="img/park.png"; break;		
	}
	document.getElementById("build").style.display = "none";
	fields[parseInt(field.charAt(5))][parseInt(field.charAt(6))][0]=option;
	document.getElementById("cell_discription").innerHTML="<h3>"+ fields_names[option]+"</h3><p>"+ fields_disc[option]+"</p>";
	
	
}





function finished(){
var general_state, total_score=100, Comments;

Comments="<h1>You have created your town!</h1>";
Comments=Comments + "<p><b>Maximum population: </b>" + (9000-options[4]*1000) + "</br>";
Comments=Comments + "<p><b>Maximum work places: </b>" + (10000-options[5]*2000) + "</br>";
Comments=Comments + "<p><b>Maximum relaxation places: </b>" + (9000-options[6]*3000) + "</br></p></br>";
Comments=Comments + "<h3>Feedback about your town</h3><p>"

if(((9-options[4])/(5-options[5]+0.1))>2) {Comments=Comments + "Some people complain about uneployment. \n"; total_score=total_score-((9-options[4])/(5-options[5]+0.1))-(2*(9-options[4])/(9-options[4]+0.05));} 
if(((9-options[4])/(5-options[5]+0.1))<1.5) {Comments=Comments + "Some companies complain about lack of workers. \n"; total_score=total_score-(2*(9-options[4])/(9-options[4]+0.05))-((9-options[4])/(5-options[5]+0.1));} 
if(((9-options[4])/(3-options[6]+0.1))>3.5) {Comments=Comments + "Some people complain about lack of relaxation zones. \n"; total_score=total_score-((9-options[4])/(3-options[6]+0.1))-(3*(9-options[4])/(9-options[4]+0.05));}
if (total_score>99) Comments=Comments + "People are happy in your City. \n";


	for ( var x = 1; x < (rows+1); x++ ) {
		for ( var y = 1; y < (rows+1); y++ ) {
		var happiness=total_score;

			if (fields[x][y][0]==4){ //if it is house
				homes.push([x,y]);
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x+1][y][1]++;
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x-1][y][1]++; 
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y+1][1]++; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y-1][1]++;
				/*POLLUTION FROM COMPANIES*/
				if (fields[x+1][y][0]==5) {fields[x][y][3]++; happiness=happiness-2;}
				if (fields[x-1][y][0]==5) {fields[x][y][3]++; happiness=happiness-2;} 
				if (fields[x][y+1][0]==5) {fields[x][y][3]++; happiness=happiness-2;} 
				if (fields[x][y-1][0]==5) {fields[x][y][3]++; happiness=happiness-2;} 
				if (fields[x][y][3]>2) {happiness=happiness-10; Comments=Comments + "Some housholds complain that there is too high level of pollution. \n";}
				/*PARKS*/
				if (fields[x+1][y][0]==6 || fields[x-1][y][0]==6 || fields[x][y+1][0]==6 ||fields[x][y-1][0]==6||fields[x+1][y+1][0]==6||fields[x-1][y+1][0]==6||fields[x+1][y-1][0]==6||fields[x-1][y-1][0]==6) {fields[x][y][2]=1;happiness=happiness+3}
				/*ROAD CONNECTIVITY*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3||fields[x-1][y][0]==2 || fields[x-1][y][0]==3||fields[x][y+1][0]==1 || fields[x][y+1][0]==3||fields[x][y-1][0]==1 || fields[x][y-1][0]==3) {
					fields[x][y][4]=1;}//connected					
				else {happiness=10;
				Comments=Comments + "Some housholds complain that they are not connected to road network. \n";}
				fields[x][y][5]=happiness;
				
			}
			
			if (fields[x][y][0]==5){ //if it is works
				companies.push([x,y]);
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x+1][y][1]+=2;
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x-1][y][1]+=2; 
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y+1][1]+=2; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y-1][1]+=2;
				
				/*Competition FROM COMPANIES*/
				if (fields[x+1][y][0]==5) {fields[x][y][3]++;}
				if (fields[x-1][y][0]==5) {fields[x][y][3]++;} 
				if (fields[x][y+1][0]==5) {fields[x][y][3]++;} 
				if (fields[x][y-1][0]==5) {fields[x][y][3]++;}
				if (fields[x+1][y+1][0]==5) {fields[x][y][3]++;}
				if (fields[x-1][y+1][0]==5) {fields[x][y][3]++;} 
				if (fields[x+1][y-1][0]==5) {fields[x][y][3]++;} 
				if (fields[x-1][y-1][0]==5) {fields[x][y][3]++;} 
				if (fields[x][y][3]>2) {happiness=happiness-10; Comments=Comments + "Some companies complain that there is too high other companies around them. \n";}
				
				/*ROAD CONNECTIVITY*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3||fields[x-1][y][0]==2 || fields[x-1][y][0]==3||fields[x][y+1][0]==1 || fields[x][y+1][0]==3||fields[x][y-1][0]==1 || fields[x][y-1][0]==3) {
					fields[x][y][4]=1;}//connected					
				else {happiness=10;
				Comments=Comments + "Some companies complain that they are not connected to road network. \n";}
				fields[x][y][5]=happiness; 				
			}
			
			if (fields[x][y][0]==6){ //if it is park
				/*ROAD CONNECTIVITY*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3||fields[x-1][y][0]==2 || fields[x-1][y][0]==3||fields[x][y+1][0]==1 || fields[x][y+1][0]==3||fields[x][y-1][0]==1 || fields[x][y-1][0]==3) {
					fields[x][y][4]=1;}//connected					
				else {happiness=10;
				Comments=Comments + "Some relaxating spots complain that they are not connected to road network. \n";}
				fields[x][y][5]=happiness; 				
			}
			
			if (fields[x][y][0]==2){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++;
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + "Some people complain about traffic \n";}				
			}
			
			if (fields[x][y][0]==1){ //if it is a road
				/*TRAFFIC*/
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++;
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + "Some people complain about traffic \n";}				
			}
			
			if (fields[x][y][0]==3){ //if it is a road
				/*TRAFFIC*/
				if (fields[x+1][y][0]==2 || fields[x+1][y][0]==3) fields[x][y][1]++;
				if (fields[x-1][y][0]==2 || fields[x-1][y][0]==3) fields[x][y][1]++; 
				if (fields[x][y+1][0]==1 || fields[x][y+1][0]==3) fields[x][y][1]++; 
				if (fields[x][y-1][0]==1 || fields[x][y-1][0]==3) fields[x][y][1]++;
				if (fields[x][y][1]<2) {fields[x][y][5]=100;}				
				if (fields[x][y][1]==2) {fields[x][y][5]=90;}				
				if (fields[x][y][1]==3) {fields[x][y][5]=70;}				
				if (fields[x][y][1]>3) {fields[x][y][5]=65; Comments=Comments + "Some people complain about traffic. \n";}				
				
			}
			
		}
	}

	var traveled_distance=0, counter=0; //calculate travel distance
	for ( var x = 0; x < homes.length; x++ ) {
		for ( var y = 0; y < companies.length; y++ ) {			
			traveled_distance=traveled_distance+Math.sqrt(Math.pow((homes[x][0]-companies[y][0]), 2)+Math.pow((homes[x][1]-companies[y][1]), 2));
			counter++;		
		}
	}
	if (counter>0) traveled_distance=traveled_distance/counter;

/*SHOW RESULTS*/
	for ( var x = 1; x < (rows+1); x++ ) {
		for ( var y = 1; y < (rows+1); y++ ) {
			fields[x][y][5]+=60-(traveled_distance*10);
			total_score+=fields[x][y][5]/10;
			console.log(fields[x][y][5]);
			if (fields[x][y][5]>95) document.getElementById("feedback" + x + y).innerHTML="<img src=\"img/happy.png\" class=\"size feedback_img\" title=\""+ fields[x][y][5] +"\">";
			else {if (fields[x][y][5]>75) document.getElementById("feedback" + x + y).innerHTML="<img src=\"img/OK.png\" class=\"size feedback_img\" title=\""+ fields[x][y][5] +"\">";
			else document.getElementById("feedback" + x + y).innerHTML="<img src=\"img/sad.png\" class=\"size feedback_img\" title=\""+ fields[x][y][5] +"\">";
			}
			if (fields[x][y][0]==0) document.getElementById("feedback" + x + y).innerHTML="<img src=\"img/empty.png\" class=\"size feedback_img\">";
		}
	}
total_score+=homes.length*30;
total_score+=companies.length*30;
total_score+=(3-options[6])*30;

if (traveled_distance<2.5) Comments=Comments + "People are happy for short traveling times. ";
else {if (traveled_distance<2.5) Comments=Comments + "People are OK with the traveling time. ";
	else Comments=Comments + "People are sad because they have to travel a lot. ";}

Comments=Comments + "</p><p><b>Your final score: </b>" + Math.round(total_score);
Comments=Comments + ". <i>The highest ever score is 978. So, do you think you can do better?</i>"	
document.getElementById("CommentsDIV").innerHTML=Comments;
document.getElementById("finish_button").style.display = "none";
document.getElementById("help_button").style.display = "none";
document.getElementById("build_button").style.display = "none";
document.getElementById("cell_discription").style.display = "none";
	
}

 
</script>	
	
</body>
</html>
